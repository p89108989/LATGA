```gherkin
Feature: NewsAPI 新聞搜索前端功能測試

  Background:
    Given 使用者開啟新聞搜索應用程式頁面

  # 驗證輸入欄位與錯誤處理
  Scenario: 搜索時若「搜索主題」為空，顯示錯誤訊息
    When 使用者將搜索主題欄位清空
    And 點擊「搜索新聞」按鈕
    Then 頁面應顯示錯誤訊息 "請輸入搜索主題"

  Scenario: 搜索時若「開始日期」未選擇，顯示錯誤訊息
    Given 搜索主題欄位輸入 "人工智能"
    When 使用者未選擇開始日期
    And 點擊「搜索新聞」按鈕
    Then 頁面應顯示錯誤訊息 "請選擇日期"

  Scenario: 搜索時若「API密鑰」為空，顯示錯誤訊息
    Given 搜索主題欄位輸入 "人工智能"
    And 選擇開始日期為 "2025-07-10"
    When 使用者將API密鑰欄位清空
    And 點擊「搜索新聞」按鈕
    Then 頁面應顯示錯誤訊息 "請輸入API密鑰"

  # 搜索流程與結果顯示
  Scenario: 成功輸入所有必填欄位後進行新聞搜索，顯示搜索結果列表
    Given 搜索主題欄位輸入 "氣候變化"
    And 開始日期選擇為 "2025-07-10"
    And 排序方式選擇為 "熱門度"
    And 語言選擇為 "中文"
    And API密鑰欄位輸入 "valid_api_key"
    And 頁碼欄位輸入 1
    When 使用者點擊「搜索新聞」按鈕
    Then 按鈕顯示為「搜索中...」
    And 頁面等待約1秒後顯示搜索結果區塊
    And 搜索結果標題顯示 "搜索結果 (156 篇文章)"
    And 搜索結果列表中顯示至少2篇新聞
    And 每篇新聞包含新聞圖片（若有）、來源名稱、作者名稱、發布時間、標題、描述與「閱讀全文」連結

  Scenario: 搜索結果中「發布時間」正確格式化為「中文(臺灣)」時間格式
    Given 已成功完成新聞搜索並顯示結果
    Then 每篇新聞的發布時間格式為「yyyy/MM/dd 上午/下午 hh:mm:ss」

  # 分頁控制
  Scenario: 頁碼欄位可輸入並更新頁碼
    Given 搜索主題欄位輸入 "人工智能"
    And 開始日期選擇為 "2025-07-10"
    And API密鑰欄位輸入 "valid_api_key"
    And 頁碼欄位輸入 1
    When 使用者點擊「搜索新聞」按鈕
    Then 搜索結果頁碼顯示為第 1 頁
    When 使用者在頁碼欄位輸入數字 3
    Then 頁碼欄位顯示為 3

  Scenario: 點擊分頁「下一頁」按鈕，頁碼應遞增且能重新搜索
    Given 搜索主題欄位輸入 "人工智能"
    And 開始日期選擇為 "2025-07-10"
    And API密鑰欄位輸入 "valid_api_key"
    And 頁碼欄位輸入 1
    And 搜索結果已顯示
    When 使用者點擊底部分頁的「下一頁」按鈕
    Then 頁碼更新為 2
    And 新的搜索結果重新顯示

  Scenario: 點擊分頁「上一頁」按鈕，頁碼應遞減且能重新搜索
    Given 搜索主題欄位輸入 "人工智能"
    And 開始日期選擇為 "2025-07-10"
    And API密鑰欄位輸入 "valid_api_key"
    And 頁碼欄位輸入 2
    And 搜索結果已顯示
    When 使用者點擊底部分頁的「上一頁」按鈕
    Then 頁碼更新為 1
    And 新的搜索結果重新顯示

  Scenario: 當頁碼為1時，分頁「上一頁」按鈕為不可點擊狀態
    Given 搜索主題欄位輸入 "人工智能"
    And 開始日期選擇為 "2025-07-10"
    And API密鑰欄位輸入 "valid_api_key"
    And 頁碼欄位輸入 1
    And 搜索結果已顯示
    Then 分頁「上一頁」按鈕為 disabled 狀態

  # 搜索按鈕狀態
  Scenario: 搜索執行時，「搜索新聞」按鈕為 disabled 且顯示「搜索中...」
    Given 搜索主題欄位輸入 "人工智能"
    And 開始日期選擇為 "2025-07-10"
    And API密鑰欄位輸入 "valid_api_key"
    When 使用者點擊「搜索新聞」按鈕
    Then 「搜索新聞」按鈕為 disabled
    And 按鈕文字顯示「搜索中...」
    And 約1秒後按鈕恢復可點擊狀態
    And 按鈕文字恢復為「搜索新聞」

  # API調用信息顯示
  Scenario: 頁面顯示API調用URL範例，並動態反映輸入參數
    Given 搜索主題欄位輸入 "人工智能"
    And 開始日期選擇為 "2025-07-10"
    And 排序方式選擇為 "相關性"
    And 語言選擇為 "日本語"
    And API密鑰欄位輸入 "myapikey123"
    And 頁碼欄位輸入 5
    Then 頁面中API調用信息區塊顯示URL包含參數：
      | q        | 人工智能   |
      | from     | 2025-07-10 |
      | sortBy   | relevancy  |
      | language | ja         |
      | apiKey   | YOUR_API_KEY (字面顯示，不顯示真實key) |
      | page     | 5          |

  # 連結功能檢查
  Scenario: 點擊新聞「閱讀全文」連結，會在新分頁開啟外部新聞頁面
    Given 搜索主題欄位輸入 "氣候變化"
    And 開始日期選擇為 "2025-07-10"
    And API密鑰欄位輸入 "valid_api_key"
    And 搜索結果已顯示
    When 使用者點擊任一新聞項目的「閱讀全文」連結
    Then 新分頁開啟連結的新聞網址
    And 連結具有 rel="noopener noreferrer" 屬性確保安全

```
---

### 說明
- 測試涵蓋所有輸入欄位驗證與錯誤提示。
- 搜索流程包含按鈕狀態、結果展示與時間格式。
- 分頁功能的上下頁按鈕與頁碼輸入皆有測試。
- API調用URL動態反映用戶輸入的參數，且頁面顯示示意。
- 確認外部連結以新分頁開啟且具備安全屬性。
- 使用者互動流程明確，符合BDD最佳實踐，利於自動化測試落地。
